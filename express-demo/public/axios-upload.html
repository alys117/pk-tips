<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
  <script src="https://cdn.bootcdn.net/ajax/libs/axios/0.26.0/axios.min.js"></script>
</head>
<body>
	<form id="form1" method="POST" enctype="multipart/form-data">
		<label for="user">用户名：</label><input id="user" type="text" name="user"><br>
		<label for="pass">密&emsp;码：</label><input id="pass" type="password" name="pass"><br>
		<input type="file" name="myfile"><br>
		<input type="submit" value="提交">
	</form>
  <button id="btn">axiox上传</button>
  <script>
    document.getElementById('btn').addEventListener('click', function(e){
      // 文件元素
      var file = document.querySelector('[type=file]');
      // 通过FormData将文件转成二进制数据
      var formData = new FormData();
      // 将文件转二进制
      formData.append('myfile',file.files[0]);
      formData.append('username', 'kokia')
      axios({
        method: 'post',
        url: '/file_upload',
        data: formData
      }).then(res => {
        console.log(res)
        alert(res)
      })
    })
    var ele=document.getElementById("form1");
    ele.onsubmit=function (e) {
      e.preventDefault()
      var file = document.querySelector('[type=file]');
      // 通过FormData将文件转成二进制数据
      var formData = new FormData();
      // 将文件转二进制
      formData.append('myfile',file.files[0]);
      formData.append('username', 'kokia')
      axios({
        method: 'post',
        url: '/file_upload',
        data: formData
      }).then(res => {
        console.log(res)
        alert(res)
      })
    }
  </script>
</body>
</html>