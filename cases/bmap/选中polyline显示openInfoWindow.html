<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <script type="text/javascript"
    src="https://api.map.baidu.com/api?v=1.0&type=webgl&ak=Eul8g1mSUP8z9XHwh9Hql0EpctbrcEK9"></script>
  <title>选中线，显示openInfoWindow</title>
  <style type="text/css">
    html {
      height: 100%
    }

    body {
      height: 100%;
      margin: 0px;
      padding: 0px;
      font-family: "微软雅黑";
    }

    #container {
      height: 100%;
      width: 100%;
    }
  </style>
</head>

<body>
  <div id="container"></div>
</body>

</html>
<script type="text/javascript">
  var map = new BMapGL.Map("container");
  var point = new BMapGL.Point(116.307852, 40.057031);
  map.centerAndZoom(point, 14);//设置中心点坐标和地图级别
  map.enableScrollWheelZoom(); //启用鼠标滚动对地图放大缩
  var marker = new BMapGL.Marker(point)
  // marker.addEventListener("click", function (e) {
  //   var opts = {
  //     width: 300,     // 信息窗口宽度
  //     height: 200,     // 信息窗口高度
  //     title: "信息窗口", // 信息窗口标题
  //     enableMessage: true//设置允许信息窗发送短息
  //   };
  //   console.log(111, e);
  //   var point = new BMapGL.Point(e.latLng.lng, e.latLng.lat);
  //   var infoWindow = new BMapGL.InfoWindow("点<br>经度：" + e.point.lng + "<br>纬度：" + e.point.lat, opts);  // 创建信息窗口对象 
  //   map.openInfoWindow(infoWindow, point); //开启信息窗口
  // });
  map.addOverlay(marker); //添加标注  

  var polyline = new BMapGL.Polyline([
    new BMapGL.Point(116.308852, 40.057031),
    new BMapGL.Point(116.307892, 40.082652),
    new BMapGL.Point(116.303003, 40.062652)
  ], { strokeColor: "blue", strokeWeight: 2 , strokeOpacity: 0.5 });

  // polyline.addEventListener("click", function (e) {
  //   var opts = {
  //     width: 300,     // 信息窗口宽度
  //     height: 200,     // 信息窗口高度
  //     title: "信息窗口", // 信息窗口标题
  //     enableMessage: true//设置允许信息窗发送短息
  //   };
  //   console.log('点击了线', e);
  //   var point = new BMapGL.Point(e.latLng.lng, e.latLng.lat);
  //   var infoWindow = new BMapGL.InfoWindow("点<br>经度：" + e.point.lng + "<br>纬度：" + e.point.lat, opts);  // 创建信息窗口对象 
  //   map.openInfoWindow(infoWindow, point); //开启信息窗口
  // });
  // map.addOverlay(polyline);

  var polygon = new BMapGL.Polygon([
    new BMapGL.Point(116.317852, 40.057031),
    new BMapGL.Point(116.316892, 40.082652),
    new BMapGL.Point(116.312003, 40.062652)
  ], { strokeColor: "blue", strokeWeight: 2, strokeOpacity: 0.5 });

  polygon.addEventListener("click", function (e) {
    var opts = {
      width: 300,     // 信息窗口宽度
      height: 200,     // 信息窗口高度
      title: "信息窗口", // 信息窗口标题
      enableMessage: true//设置允许信息窗发送短息
    };
    console.log('点击了polygon', e);
    var aa = [new BMapGL.Point(116.317852, 40.057031),new BMapGL.Point(116.316892, 40.082652),new BMapGL.Point(116.312003, 40.062652)]
    var point = new BMapGL.Point(e.latLng.lng, e.latLng.lat);
    var infoWindow = new BMapGL.InfoWindow("polygon点<br>经度：" + e.point.lng + "<br>纬度：" + e.point.lat, opts);  // 创建信息窗口对象
    var n = Math.floor(Math.random()*3)
    console.log(n);
    map.openInfoWindow(infoWindow, point); //开启信息窗口
    // map.openInfoWindow(infoWindow, aa[n]); //开启信息窗口
  });
  map.addOverlay(polygon);


  // map.addEventListener('click', function(e){
  //   var opts = {
  //     width: 300,     // 信息窗口宽度
  //     height: 200,     // 信息窗口高度
  //     title: "信息窗口", // 信息窗口标题
  //     enableMessage: true//设置允许信息窗发送短息
  //   };
  //   var point = new BMapGL.Point(e.latlng.lng, e.latlng.lat);
  //   var infoWindow = new BMapGL.InfoWindow("点<br>经度：" + e.point.lng + "<br>纬度：" + e.point.lat, opts);  // 创建信息窗口对象 
  //   map.openInfoWindow(infoWindow, point); //开启信息窗口
  // })
</script>