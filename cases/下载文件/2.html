<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <!-- <img src="http://localhost:8075/webroot/help/picture/guangzhou.jpg" alt=""> -->
  <script type="module">

    const imgToDataURL = (src) => {
      return new Promise((resolve, reject) => {
        const img = new Image()
        //如果图片设置需要跨域
        img.setAttribute("crossOrigin", "anonymous")
        img.onload = () => {
          document.body.appendChild(img)
          // try {
          //   let canvas = document.createElement('canvas')
          //   canvas.width = img.width;
          //   canvas.height = img.height
          //   let ctx = canvas.getContext('2d')
          //   //图片绘制到canvas
          //   ctx.drawImage(img, 0, 0, img.width, img.height)
          //   resolve(canvas.toDataURL())
          // } catch {
          //   reject(e)
          // }
        }
        img.onerror = (e) => {
          console.log(e);
          reject(e)
        }
        img.src = src
      })
    }

    imgToDataURL('http://localhost:8075/webroot/help/picture/guangzhou.jpg')
  </script>

</body>

</html>